/**
 * @name MXPage.js
 * @version 0.0.2
 * @create 2015-09-15
 * @lastmodified 2015-09-15 17:36
 * @description jQuery page navigation plugin
 * @author MuFeng (http://mufeng.me)
 * @url http://mufeng.me
 **/
;(function(c){var e=function(a,b){this.settings=a;this.element=c(b);this.layout()};e.prototype={layout:function(){if(!(1>=this.settings.maxPage)){this.fireEvent();this.build(1,"mxpage-front",this.settings.frontPageText);this.build(Math.max(1,this.settings.currentPage-1),"mxpage-previous",this.settings.previousText);var a,b;this.settings.currentPage<this.settings.perPage/2?(a=1,b=Math.min(this.settings.maxPage,this.settings.perPage)):this.settings.maxPage-this.settings.currentPage<this.settings.perPage/
2?(a=Math.max(1,this.settings.maxPage-this.settings.perPage+1),b=this.settings.maxPage):(a=this.settings.currentPage-Math.ceil(this.settings.perPage/2),b=a+this.settings.perPage-1);for(a;a<=b;a++)this.build(a,"mxpage-default");this.build(Math.min(this.settings.maxPage,this.settings.currentPage+1),"mxpage-next",this.settings.nextText);this.build(this.settings.maxPage,"mxpage-last",this.settings.lastPageText);this.addEvent()}},build:function(a,b,d){"mxpage-default"==b&&this.settings.currentPage==a&&
(b+=" active");a=c('<li><a href="javascript:;" class="mxpage '+b+'" data-page="'+a+'">'+(d||a)+"</a></li>");this.element.children(".mxpage-container").append(a)},addEvent:function(){var a=this;a.element.on("click",".mxpage",function(b){b=c(this);var d=parseInt(b.attr("data-page"));a.settings.currentPage!=d&&(a.settings.currentPage=d,a.layout(),a.settings.click(d,b))})},fireEvent:function(){this.element.children(".mxpage-container")&&(this.element.children(".mxpage-container").remove(),this.element.off("click"));
    this.element.append('<ul class="mxpage-container pagination"></ul>')}};c.mxpage=function(a,b){a=c.extend({perPage:10,currentPage:1,maxPage:1,previousText:"previous",nextText:"next",frontPageText:"front page",lastPageText:"last page",click:function(a,b){}},a);c.data(b,"mxpage",new e(a,b));return b};c.fn.mxpage=function(a){return c.mxpage(a,this)}})(jQuery);